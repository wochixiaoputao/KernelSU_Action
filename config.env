CONFIG_ENV=config.env

# 1. 源码地址 (保持 LineageOS 不变，已验证可用)
KERNEL_SOURCE=https://github.com/LineageOS/android_kernel_xiaomi_sm8350
KERNEL_SOURCE_BRANCH=lineage-21

# 2. 配置文件 (保持不变)
KERNEL_CONFIG=vendor/lahaina-qgki_defconfig
KERNEL_IMAGE_NAME=Image
ARCH=arm64
ADD_LOCALVERSION_TO_FILENAME=true
EXTRA_CMDS:LD=ld.lld

# 3. 编译器 (保持 Proton Clang 不变)
USE_CUSTOM_CLANG=true
CUSTOM_CLANG_SOURCE=https://github.com/kdrag0n/proton-clang
CUSTOM_CLANG_BRANCH=master
CUSTOM_CMDS:CLANG_TRIPLE=aarch64-linux-gnu-

# 占位防止报错
CLANG_BRANCH=master-kernel-build-2022
CLANG_VERSION=r383902b

# GCC (保持默认)
ENABLE_GCC_ARM64=true
ENABLE_GCC_ARM32=true
USE_CUSTOM_GCC_64=false
CUSTOM_GCC_64_SOURCE=
CUSTOM_GCC_64_BRANCH=
CUSTOM_GCC_64_BIN=aarch64-linux-android-
USE_CUSTOM_GCC_32=false
CUSTOM_GCC_32_SOURCE=
CUSTOM_GCC_32_BRANCH=
CUSTOM_GCC_32_BIN=arm-linux-androideabi-

# 4. KernelSU (保持开启)
ENABLE_KERNELSU=true
KERNELSU_TAG=main
KSU_EXPECTED_SIZE=
KSU_EXPECTED_HASH=

# 5. ⚠️【关键修改】关闭 LTO 优化
# 之前是 false，改为 true。这能解决 90% 的 Error 2 报错
DISABLE-LTO=true

# 6. 忽略警告 (保持开启)
DISABLE_CC_WERROR=true

# 7. 模块支持 (保持开启)
ADD_KPROBES_CONFIG=true
ADD_OVERLAYFS_CONFIG=true
APPLY_KSU_PATCH=true
REMOVE_UNUSED_PACKAGES=true

# 8. 打包设置 (保持不变)
USE_CUSTOM_ANYKERNEL3=true
CUSTOM_ANYKERNEL3_SOURCE=https://github.com/osm0sis/AnyKernel3
CUSTOM_ANYKERNEL3_BRANCH=master

ENABLE_CCACHE=true
NEED_DTBO=false
BUILD_BOOT_IMG=false
SOURCE_BOOT_IMAGE=
